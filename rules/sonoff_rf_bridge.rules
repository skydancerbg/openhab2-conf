// // // // // // // //  // // // // // // //
// // // // PIR SENSORS // // // // // // //

// RF PIR 1 CODE: D3C22E    ОФИС
var rfcode_pir_1 = "D3C22E"
// RF PIR 2 CODE: D511CE    РАБОТИЛНИЦА
var rfcode_pir_2 = "D511CE"
// RF PIR 3 CODE: D5053E    ХОЛ
var rfcode_pir_3 = "D5053E"
// RF PIR 4 CODE: D48C4E    ГАРАЖ
var rfcode_pir_4 = "D48C4E"
// RF PIR 5 CODE: D3426E    НЕ РАБОТИ !!!
var rfcode_pir_5 = "D3426E"
// RF PIR 6 CODE: F3EB4E    КОРИДОР ЕТ. 1
var rfcode_pir_6 = "F3EB4E"

// // // // // // // //  // // // // // // //
// // // // WALL SWITCHES   // // // // // // 

// 1 BUTTON RF SWITCH 1
// BUTTON 079EA2
var rfcode_wallsw_1btn_1_btn = "079EA2"


// 1 BUTTON RF SWITCH 2 // КОТЕЛНО БЕНКОВСКИ
// BUTTON 6D7228
var rfcode_wallsw_1btn_2_btn = "6D7228"

// 2 BUTTON RF SWITCH 1
// LEFT 
// var rfcode_wallsw_2btn_1_left = ""
// RIGHT 
// var rfcode_wallsw_2btn_1_right = ""

// 3 BUTTON RF SWITCH 1
// LEFT 0BE4E4
var rfcode_wallsw_3btn_1_left = "0BE4E4"
// MIDDLE 0BE4E2
var rfcode_wallsw_3btn_1_middle = "0BE4E2"
// RIGHT 0BE4E1
var rfcode_wallsw_3btn_1_right = "0BE4E1"


// // // // // // // //  // // // // // // //
// // // // KEYCHAIN REMOTES   // // // // // 
    
// Keychain remote 1/ SILVER -Stefan
var rfcode_keychain_1_A = "04FBA1"
// B 04FBA2
var rfcode_keychain_1_B = "04FBA2"
// C 04FBA4
var rfcode_keychain_1_C = "04FBA4"
// D 04FBA8
var rfcode_keychain_1_D = "04FBA8"

// Keychain remote 2 / BLUE -Venci
// A 214AC4
var rfcode_keychain_2_A = "214AC4"
// B 214AC8
var rfcode_keychain_2_B = "214AC8"
// C 214AC1
var rfcode_keychain_2_C = "214AC1"
// D 214AC2
var rfcode_keychain_2_D = "214AC2"

// Keychain remote 3 / BLUE - Simo
// A 
var rfcode_keychain_3_A = "7EB2A4"
// B 
var rfcode_keychain_3_B = "7EB2A1"
// C 
var rfcode_keychain_3_C = "7EB2A8"
// D 
var rfcode_keychain_3_D = "7EB2A2"  

// Keychain remote 4 / BLUE - Desi
// A 
var rfcode_keychain_4_A = "170121"
// B 
var rfcode_keychain_4_B = "170122"
// C 
var rfcode_keychain_4_C = "170124"
// D 
var rfcode_keychain_4_D = "170128"  

// // // // // // // //  // // // // // // //
// // // // 8 CHANNEL REMOTES  // // // // // 

// 8 channel RF remote 1
// 627E68
var rfcode_8chan_1_1 = "627E68"
// 627E64
var rfcode_8chan_1_2 = "627E64"
// 627E62
var rfcode_8chan_1_3 = "627E62"
// 627E61
var rfcode_8chan_1_4 = "627E61"
// 627E6C
var rfcode_8chan_1_5 = "627E6C"
// 627E69
var rfcode_8chan_1_6 = "627E69"
// 627E65
var rfcode_8chan_1_7 = "627E65"
// 627E63
var rfcode_8chan_1_8 = "627E63"

// 8 channel RF remote 2
// 93A2A8
var rfcode_8chan_2_1 = "93A2A8"
// 93A2A4
var rfcode_8chan_2_2 = "93A2A4"
// 93A2A2
var rfcode_8chan_2_3 = "93A2A2"
// 93A2A1
var rfcode_8chan_2_4 = "93A2A1"

// 93A2AC
var rfcode_8chan_2_5 = "93A2AC"
// 93A2A9
var rfcode_8chan_2_6 = "93A2A9"
// 93A2A5
var rfcode_8chan_2_7 = "93A2A5" 
// 93A2A3
var rfcode_8chan_2_8 = "93A2A3"

// String rf_rcv_data
// String GF_Sonoff_RF_Received_RfKey
// https://community.openhab.org/t/openhab-2-4-tasmota-mqtt-json-on-rf-bridge-and-pir-motion-sensor/74248/13

rule "Sonof RF codes processing"
when
    Item rf_rcv_data received update // Need received update if Data has not change but button still pressed
then
    if (rf_rcv_data.state == "D3C22E")
    {
        Sonoff_RF_PIR_1.postUpdate("DETECT")
        Pir_1_Motion.sendCommand(ON)
        // logInfo("security_system", "PIR1 activated")
        Thread::sleep(5000)
        Sonoff_RF_PIR_1.postUpdate("")
        Pir_1_Motion.sendCommand(OFF)
        // logInfo("security_system", "PIR1 off")
        // logInfo("PIR_", GF_Sonoff_RF_Received_Data.state.toString)

    } else if (rf_rcv_data.state == "D511CE")
  
    {
        Sonoff_RF_PIR_2.postUpdate("DETECT")
        Pir_2_Motion.sendCommand(ON)
        // logInfo("security_system", "PIR2 activated")
        Thread::sleep(5000)
        Sonoff_RF_PIR_2.postUpdate("")
        Pir_2_Motion.sendCommand(OFF)
        // logInfo("security_system", "PIR2 off")

    } else if (rf_rcv_data.state == "D5053E")
  
    {
        Sonoff_RF_PIR_3.postUpdate("DETECT")
        Pir_3_Motion.sendCommand(ON)
        // logInfo("security_system", "PIR3 activated")
        Thread::sleep(5000)
        Sonoff_RF_PIR_3.postUpdate("")
        Pir_3_Motion.sendCommand(OFF)
        // logInfo("security_system", "PIR3 off")

    } else if (rf_rcv_data.state == "D48C4E") //GARRAGE!!!!!!!
  
    {
        Sonoff_RF_PIR_4.postUpdate("DETECT")
        GF_GR_MotionDetector1.sendCommand (ON) // ZA LAMPATA
        Pir_4_Motion.sendCommand(ON)
        // logInfo("security_system", "PIR4 activated garage")
        Thread::sleep(5000)
        Sonoff_RF_PIR_4.postUpdate("")
        Pir_4_Motion.sendCommand(OFF)
        // logInfo("security_system", "PIR4 off garage")

    } else if (rf_rcv_data.state == "D3426E")
  
    {
        Sonoff_RF_PIR_5.postUpdate("DETECT")
        Pir_5_Motion.sendCommand(ON)
        // logInfo("security_system", "PIR5 activated")
        Thread::sleep(5000)
        Sonoff_RF_PIR_5.postUpdate("")
        Pir_5_Motion.sendCommand(OFF)
        // logInfo("security_system", "PIR5 off")

    } else if (rf_rcv_data.state == rfcode_pir_6)
  
    {
        Sonoff_RF_PIR_6.postUpdate("DETECT")
        Pir_6_Motion.sendCommand(ON)
        logInfo("security_system", "PIR6 activated")
        Thread::sleep(5000)
        Sonoff_RF_PIR_6.postUpdate("")
        Pir_6_Motion.sendCommand(OFF)
        logInfo("security_system", "PIR6 off")


// // // // // // // // // // // // // //
// // // ИЗГАСИ ЦЯЛОТО ОСВЕТЛЕНИЕ  // // //
// // // ALL LIGHTS OFF            // // //

// Switched by:
//wall switch 3btn 1 right
//keychain 1 D
//keychain 2 D

    } else if (rf_rcv_data.state == rfcode_wallsw_3btn_1_right || rf_rcv_data.state == rfcode_keychain_1_D 
                || rf_rcv_data.state == rfcode_keychain_2_D)
        {
            
            Gr_ALL_LIGHTS.sendCommand(OFF)

// // // // // // // // // // // // // //
// // // ВКЛЮЧИ АЛАРМАТА         // // //
// // // SECURITY SYSTEM ON      // // //

// Switched by:
//keychain 1 A
//keychain 2 A
//keychain 3 A
//keychain 4 A


    } else if (rf_rcv_data.state == rfcode_keychain_1_A ||
               rf_rcv_data.state == rfcode_keychain_2_A ||
               rf_rcv_data.state == rfcode_keychain_3_A ||
               rf_rcv_data.state == rfcode_keychain_4_A)
        {
            // logInfo("rfcode_keychain_1_A", "Buton A!!!!!")
    
            Alarm_Arm_Disarm_Switch.sendCommand(1)

// // // // // // // // // // // // // //
// // // ИЗКЛЮЧИ АЛАРМАТА        // // //
// // // SECURITY SYSTEM OFF     // // //

// Switched by:
//keychain 1 C
//keychain 2 C
//keychain 3 C
//keychain 4 C


    } else if (rf_rcv_data.state == rfcode_keychain_1_C ||
               rf_rcv_data.state == rfcode_keychain_2_C ||
               rf_rcv_data.state == rfcode_keychain_3_C ||
               rf_rcv_data.state == rfcode_keychain_4_C)
        {
            // logInfo("rfcode_keychain_1_A", "Buton A!!!!!")
    
            Alarm_Arm_Disarm_Switch.sendCommand(0)

// // // // // // // // // // // // // //
// // // ВКЛЮЧИ ЦЯЛОТО ОСВЕТЛЕНИЕ  // // //
// // // ALL LIGHTS ON             // // //

// Switched by:
//keychain 1 B
//keychain 2 B
//keychain 3 B
//keychain 4 B


    } else if (rf_rcv_data.state == rfcode_keychain_1_B ||
               rf_rcv_data.state == rfcode_keychain_2_B ||
               rf_rcv_data.state == rfcode_keychain_3_B ||
               rf_rcv_data.state == rfcode_keychain_4_B)
        {
            logInfo("rfcode_keychain_1_B", "Buton B!!!!!")
    
            Gr_ALL_LIGHTS.sendCommand(ON)


// // // // // // // // // // // // // //
// // // ИЗГАСИ ВСИЧКИ КОНСУМАТОРИ И ОСВЕТЛЕНИЕТО  // // //
// // // ALL POWERED DEVICES AND LIGHTS OFF        // // //

// Switched by:
//wall switch 3btn 1 MIDDLE
//keychain 1 D
//keychain 2 D
//keychain 3 D
//keychain 4 D

    } else if (rf_rcv_data.state == rfcode_wallsw_3btn_1_middle || 
    rf_rcv_data.state == rfcode_keychain_1_D ||
    rf_rcv_data.state == rfcode_keychain_2_D ||
    rf_rcv_data.state == rfcode_keychain_3_D ||
    rf_rcv_data.state == rfcode_keychain_4_D)
        {
            
            Gr_ALL_POWER.sendCommand(OFF)
            Gr_ALL_LIGHTS.sendCommand(OFF)

// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ РАБОТИЛНИЦА  // // //
// // // WORKSHOP LIGHT          // // //

// Switched by:
//wall switch 3btn 1 left
//keychain 1 A
//keychain 2 A
//rfcode_8chan_1_1
//rfcode_8chan_2_1

    } else if (rf_rcv_data.state == rfcode_wallsw_3btn_1_left || rf_rcv_data.state == rfcode_keychain_1_A 
                || rf_rcv_data.state == rfcode_keychain_2_A || rf_rcv_data.state == rfcode_8chan_1_1
                || rf_rcv_data.state == rfcode_8chan_2_1)
        {
            if (GF_TR_Sonoff_4CH_1_Power1.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_1_Power1.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_1_Power1.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_1_Power1.sendCommand(OFF)
                                    }

// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ КОРИДОР ГАРАЖ   // // //
// // // CODDIDOR GARAGE LIGHT      // // //

// Switched by:
//rfcode_8chan_1_2
//rfcode_8chan_2_2

    } else if (rf_rcv_data.state == rfcode_8chan_1_2
                || rf_rcv_data.state == rfcode_8chan_2_2)
        {
            if (GF_TR_Sonoff_4CH_2_Power2.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_2_Power2.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_2_Power2.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_2_Power2.sendCommand(OFF)
                                    }


// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ СКЛАД ГАРАЖ   // // //
// // // GARAGE STORAGE LIGHT      // // //

// Switched by:
//rfcode_8chan_1_3
//rfcode_8chan_2_3

    } else if (rf_rcv_data.state == rfcode_8chan_1_3 
                || rf_rcv_data.state == rfcode_8chan_2_3)
        {
            if (GF_TR_Sonoff_4CH_1_Power4.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_1_Power4.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_1_Power4.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_1_Power4.sendCommand(OFF)
                                    }


// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ ГАРАЖ   // // //
// // // GARAGE LIGHT      // // //

// Switched by:
//rfcode_8chan_1_4
//rfcode_8chan_2_4

    } else if (rf_rcv_data.state == rfcode_8chan_1_4
                || rf_rcv_data.state == rfcode_8chan_2_4)
        {
            if (GF_TR_Sonoff_4CH_2_Power4.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_2_Power4.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_2_Power4.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_2_Power4.sendCommand(OFF)
                                    }


// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ КОРИДОР ЕТАЖ 1   // // //
// // // CODDIDOR GROUND FLOOR LIGHT      // // //

// Switched by:
//rfcode_8chan_1_5
//rfcode_8chan_2_5

    } else if (rf_rcv_data.state == rfcode_8chan_1_5
                || rf_rcv_data.state == rfcode_8chan_2_5)
        {
            if (GF_TR_Sonoff_4CH_2_Power1.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_2_Power1.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_2_Power1.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_2_Power1.sendCommand(OFF)
                                    }


// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ БАНЯ/ТОАЛЕТНА ЕТАЖ 1   // // //
// // // BATHROOM GROUND FLOOR LIGHT      // // //

// Switched by:
//rfcode_8chan_1_6
//rfcode_8chan_2_6
//rfcode_wallsw_1btn_1_btn

    } else if (rf_rcv_data.state == rfcode_8chan_1_6 || rf_rcv_data.state == rfcode_wallsw_1btn_1_btn
                || rf_rcv_data.state == rfcode_8chan_2_6)
        {
            if (GF_TR_Sonoff_4CH_1_Power3.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_1_Power3.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_1_Power3.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_1_Power3.sendCommand(OFF)
                                    }


// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ ХОЛ ЕТАЖ 1   // // //
// // // LIVINGROOM GROUND FLOOR LIGHT      // // //

// Switched by:
//rfcode_8chan_1_7
//rfcode_8chan_2_7

    } else if (rf_rcv_data.state == rfcode_8chan_1_7 
                || rf_rcv_data.state == rfcode_8chan_2_7)
        {
            if (GF_TR_Sonoff_4CH_2_Power3.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_2_Power3.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_2_Power3.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_2_Power3.sendCommand(OFF)
                                    }


// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ ОФИС ЕТАЖ 1   // // //
// // // OFFICE GROUND FLOOR LIGHT      // // //

// Switched by:
//rfcode_8chan_1_8
//rfcode_8chan_2_8

    } else if (rf_rcv_data.state == rfcode_8chan_1_8 
                || rf_rcv_data.state == rfcode_8chan_2_8)
        {
            if (GF_TR_Sonoff_4CH_1_Power2.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_1_Power2.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_1_Power2.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_1_Power2.sendCommand(OFF)
                                    }

// // // // // // // // // // // // // //
// // // ОСВЕТЛЕНИЕ КОТЕЛНО   // // //
// // // TECHNICAL ROOM (HEATING) LIGHT      // // //

// Switched by:
//rfcode_wallsw_1btn_2_btn

    } else if (rf_rcv_data.state == rfcode_wallsw_1btn_2_btn)
        {
            if (GF_TR_Sonoff_4CH_2_Power4.state == OFF)  
                                    { 
                                        GF_TR_Sonoff_4CH_2_Power4.sendCommand(ON)
                                    }
            else if ( GF_TR_Sonoff_4CH_2_Power4.state == ON) 
                                    {
                                        GF_TR_Sonoff_4CH_2_Power4.sendCommand(OFF)
                                    }


// // // // END
        }
end




//     // Бенковски трипозиционен RF ключ
// // Liavo 0BE4E4
// // Sreda 0BE4E2
// // Diasno 0BE4E1

//     // Benkovski RF 3 gang switch GANG 1
//     } else if (GF_Sonoff_RF_Received_Data.state == "0BE4E4")
//         {
//             // logInfo("benkovski", "poluchi koda")
//             if (GF_TR_Sonoff_4CH_1_Power3.state == OFF)  
//                                     { 
//                                         GF_TR_Sonoff_4CH_1_Power3.sendCommand(ON)
//                                         // logInfo("benkovski", "dade on - ON")
//                                     }
    
//             else if ( GF_TR_Sonoff_4CH_1_Power3.state == ON) 
//                                     {
//                                         GF_TR_Sonoff_4CH_1_Power3.sendCommand(OFF)
                                      
//                                     // logInfo("benkovski", "prati - OFF")
//                                     }
        

//     // // Benkovski RF 3 gang switch GANG 2
//     // // DA SE PROMENIIIIIIIIIIII
//     } else if (GF_Sonoff_RF_Received_Data.state == "0BE4E2")
//         {
//             // logInfo("benkovski", "poluchi koda")
//             if (GF_TR_Sonoff_4CH_1_Power3.state == OFF)  
//                                     { 
//                                         GF_TR_Sonoff_4CH_1_Power3.sendCommand(ON)
//                                         // logInfo("benkovski", "dade on - ON")
//                                     }
    
//             else if ( GF_TR_Sonoff_4CH_1_Power3.state == ON) 
//                                     {
//                                         GF_TR_Sonoff_4CH_1_Power3.sendCommand(OFF)
                                      
//                                     // logInfo("benkovski", "prati - OFF")
//                                     }
        

//     // // Benkovski RF 3 button switch GANG 3
//     // // BENKOVSKI ALL LIGHTS OFF - 3 BUTTON RF SWITCH 3-rd BUTTON
//     } else if (GF_Sonoff_RF_Received_Data.state == "0BE4E1")
//         {
//             Gr_ALL_LIGHTS.sendCommand(OFF)
//             // logInfo("benkovski BUTON 3", "prati - Gr_ALL_LIGHTS OFF")
        

//     // // Benkovski RF 1 gang switch BATHROOM КЛЮЧ ТОАЛЕТНА
   
//     } else if (GF_Sonoff_RF_Received_Data.state == "079EA2")
//         {
//             logInfo("BATHROOM", "poluchi koda")
//             if (GF_TR_Sonoff_4CH_1_Power2.state == OFF)  
//                                     { 
//                                         GF_TR_Sonoff_4CH_1_Power2.sendCommand(ON)
//                                         logInfo("BATHROOM", "dade on - ON")
//                                     }
    
//             else if ( GF_TR_Sonoff_4CH_1_Power2.state == ON) 
//                                     {
//                                         GF_TR_Sonoff_4CH_1_Power2.sendCommand(OFF)
                                      
//                                     logInfo("BATHROOM", "prati - OFF")
//                                     }


        
// // // // // // // // // // // // // // // // // // // // // // // /
//     // // Benkovski RF Дистанционно 1 (сребристо)

// // Keychain remote 1
// //A // 04FBA1
// //B // 04FBA2
// //C // 04FBA4
// //D // 04FBA8    
//     // // A включва осветление работилница
//     } else if (GF_Sonoff_RF_Received_Data.state == "04FBA1")
//         {
//             if (GF_TR_Sonoff_4CH_1_Power3.state == OFF)  
//                                     { 
//                                         GF_TR_Sonoff_4CH_1_Power3.sendCommand(ON)
//                                     }
    
//             else if ( GF_TR_Sonoff_4CH_1_Power3.state == ON) 
//                                     {
//                                         GF_TR_Sonoff_4CH_1_Power3.sendCommand(OFF)
//                                     }
//     // // B включва осветление офис 

//     } else if (GF_Sonoff_RF_Received_Data.state == "04FBA2")
//         {
//             if (GF_TR_Sonoff_4CH_1_Power1.state == OFF)  
//                                     { 
//                                         GF_TR_Sonoff_4CH_1_Power1.sendCommand(ON)
//                                     }
    
//             else if ( GF_TR_Sonoff_4CH_1_Power1.state == ON) 
//                                     {
//                                         GF_TR_Sonoff_4CH_1_Power1.sendCommand(OFF)
//                                     }

//     // // C включва осветление гараж 

//     } else if (GF_Sonoff_RF_Received_Data.state == "04FBA4")
//         {
//             if (GF_Sonoff_TH16_4_Power.state == OFF)  
//                                     { 
//                                         GF_Sonoff_TH16_4_Power.sendCommand(ON)
//                                     }
    
//             else if ( GF_Sonoff_TH16_4_Power.state == ON) 
//                                     {
//                                         GF_Sonoff_TH16_4_Power.sendCommand(OFF)
//                                     }
// // 8 channel RF remote 1
// // 627E68
// // 627E64
// // 627E62
// // 627E61

// // 627E6C
// // 627E69
// // 627E65
// // 627E63


//     // // D извключва цялото осветление 
//     // // BENKOVSKI ALL LIGHTS OFF
//     } else if (GF_Sonoff_RF_Received_Data.state == "04FBA8")
//         {
//             Gr_ALL_LIGHTS.sendCommand(OFF)
//             logInfo("benkovski BUTON 3", "prati - Gr_ALL_LIGHTS OFF")
        


//         }
    


// end

// // Keychain remote 1/ SILVER
// // 04FBA1
// // 04FBA2
// // 04FBA4
// // 04FBA8

// // Keychain remote 2 / BLUE
// // 214AC4
// // 214AC8
// // 214AC1
// // 214AC2

// // 8 channel RF remote 1
// // 627E68
// // 627E64
// // 627E62
// // 627E61

// // 627E6C
// // 627E69
// // 627E65
// // 627E63

// // 8 channel RF remote 2
// // 93A2A8
// // 93A2A4
// // 93A2A2
// // 93A2A1

// // 93A2AC
// // 93A2A9
// // 93A2A5
// // 93A2A3



